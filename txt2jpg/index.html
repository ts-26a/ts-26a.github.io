<!doctype html>
<html lang="ja">
    <script type="text/javascript">
        var canvas = document.getElementById("canvas");
        window.onload = function() {
            var param = location.search.replace("?txt=", "");
            param = decodeURI(param);
            var lines = param.split("\n");
            var ctx = canvas.getContext("2d");
            ctx.fillStyle="#c0c0c0";
            ctx.fillRect(0, 0, 1000, 1000);
            ctx.fillStyle = "#000000";
            ctx.font = "40px monospace";
            ctx.textAlign = "center";
            var line;
            line_len = lines.length;
            for (var i = 0; i < line_len; i++) {
                line = lines[i];
                ctx.fillText(line, 500, 40 * (i + 1));
            }
            var hiddenp = document.getElementById("hiddenp");
            hiddenp.innerHTML = canvas.toDataURL("image/jpeg");
            functioin getPath() {
                return canvas.toDataURL("image/jpeg");
            }
        }
    </script>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>txt2jpg</title>
    </head>
    <body>
        <div id="canvas_w">
            <canvas id="canvas" width="1000" height="1000" hidden>
            </canvas>
        </div>
        <img id="img" src="aieo" onload="this.onload=null; this.src=getPath();" />
    </body>
</html>
